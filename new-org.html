<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="https://cdn.cocreate.app/favicon.ico" type="image/ico" sizes="16x16">
        <title>New Organization | cocreate.app</title>

<!-- CoCreateUI -->
  <!--<link rel="stylesheet" href="https://cdn.cocreate.app/CoCreate.min.css" type="text/css" />-->
  <link rel="stylesheet" href="https://server.cocreate.app/css/CoCreate.min.css" type="text/css" />
  <!--<link rel="stylesheet" href="https://cdn.cocreate.app/CoCreate-signup.css">-->
  <link rel="stylesheet" href="https://server.cocreate.app/css/CoCreate-signup.css">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" crossorigin="anonymous" />    


    </head>

    <body>
    	<a href="signin.html" target="" class="sessionFalse" style="display: none"></a>

		<div class="btns_top_right">
			<a href="index.html" title="" class='btn-login dashboardLink'>Dashboard</a>
		</div>

        <div class="main-container vcenter hcenter">
        	<div class="flex-container wrap flex-end">
                <div class="dialog-box">
                	<img src="https://cdn.cocreate.app/Preloader_2.gif" class="icon_ava">
                	<hgroup class="speech-bubble">
                        <div class="description">
                        	<p id="ava1">
                        		Hey, <span data-document_id="" name="name" class="sessionUser_Id" data-collection="users">First Name</span>!
                                Enter your new organization's name. Don't worry if you are not sure, you can allways update it later.
                        	</p>
                         	<p id="ava2"  class="hidden">
                        		Great, <span data-document_id="" name="name" class="sessionUser_Id" data-collection="users">First Name</span>!
                            	Letâ€™s choose an industry so I can begin to understand what we will be doing.
                        	</p>
            							<p id="ava3"  class="hidden">
                        		I could do special animations to impress you. But instead I will build your organization instantly and impress you with my speed!
                        	</p>
                        </div>
					        </hgroup>
                </div>
               
                <div class="form-box">
                    <form  data-realtime="false" data-form_id="organization_id" data-collection="organizations" style="display: block;">
                	    <div id="step1">
                        	<div class="form-top">
                        		<div class="form-top-left">
                        			<h3>Step 1 / 3</h3>
                        		</div>
                        		<div class="form-top-right">
	                        			<i class="fas fa-store"></i>
                        		</div>
                            </div>
                            <div class="form-bottom">
		                        <input type="text" data-document_id="" id="org-name" name="name" placeholder="Organization Name" class="floating-label">
							            	<!-- keys -->
		                        <input type="hidden"  id="apiKey" name="apiKey"  placeholder="API Key" data-document_id="" readonly>
	                    		  <input type="hidden"  id="securityKey" name="securityKey"  placeholder="security Key" data-document_id="" readonly>

		                        <button type="button" class="outline show_hide submitBtn " data-show_id='#step2,#ava2' data-hide_id='#step1,#ava1'>
		                            <a data-pass_document_id="" data-pass_to="organization_id"></a>Next
		                        </button>
		                      </div>
                        </div>
                    </form>
		              
	                 <form data-collection="organizations" data-form_id="organization_id" id="organization-form">
	                    <div id="step2"  class="hidden" >
                        	<div class="form-top">
                        		<div class="form-top-left">
                        			<h3>Step 2 / 3</h3>
                        		</div>
                        		<div class="form-top-right">
                        			<i class="fas fa-industry"></i>
                        		</div>
                            </div>
                            <div class="form-bottom">
                               <!-- Industry select -->
                                <div class="select--field sortable floating-label" name="industry" data-collection="organizations" data-document_id="" data-pass_id="organization_id" placeholder="Industry">
          							          <input class="template-search" placeholder="Search" data-engine-id="idEngine1">
          							          <ul data-fetch_collection="industries" data-template_id="template1" data-pass_to="me1234" id="idEngine1" class="template-wrapper selectable--list cocreate-scroll">
          							      			<li class="template selectable" id="template1" data-pass_id="me1234">
          							      			<h5 data-collection="industries" data-document_id="" name="industry_name" data-pass_id="me1234">industry name</h5>
          							      			</li>
          							          </ul>
                                </div>
								<!-- keys -->
		                        <input type="hidden" name="apiKey"  placeholder="API Key" data-document_id=""  data-pass_id="organization_id" readonly>
	                    		<input type="hidden" name="securityKey"  placeholder="security Key" data-document_id=""  data-pass_id="organization_id" readonly>

  				              <input type="hidden" name="_id" id="org_id" data-document_id="" data-pass_id="organization_id">

  				              <!--<input type="hidden" name="industry" data-document_id="" data-pass_id="organization_id">-->
                          
                          <button type="button" class="outline white-blue show_hide" data-show_id='#step1,#ava1' data-hide_id='#step2,#ava2'>Previous</button>
	                        <button type="button" class="outline show_hide industryBtn" data-show_id='#step3,#ava3' data-hide_id='#step2,#ava2'><a data-pass_document_id="" data-pass_to="currentOrgId" data-pass_id="organization_id"></a>Next</button>
		                    </div>
	                    </div>
	                   </form>
	                    
	                   <form data-collection="organizations">
	                 
	                    <div id="step3"  class="hidden">
                        	<div class="form-top">
                        		<div class="form-top-left">
                        			<h3>Step 3 / 3</h3>
                        		</div>
                        		<div class="form-top-right">
                        			<i class="fas fa-industry"></i>
                        		</div>
                            </div>
                            <div class="form-bottom">

				            <input type="hidden" name="_id" id="currentOrgId" data-pass_id="currentOrgId" data-document_id="">

  							<button type="button" class="outline white-blue show_hide" data-show_id='#step2,#ava2' data-hide_id='#step3,#ava3'>Previous</button>
  							<button type="button" class="outline red-white"><a data-pass_document_id="" href="index.html">Launch</a></button>

		                    </div>
	                    </div>
                    </form>
                    <form data-collection="users" data-form_id="user" id="user-form" class="hidden">
                       <!-- connected_orgs select-->
                        <div class="select--field sessionUser_Id" name="connected_orgs" data-collection="users" data-document_id=""  multiple>
                          <input placeholder="Search" class="searchInput" data-get_value="org_id">
                          <ul class="selectable--list cocreate-scroll">
                      			<li class="selectable"></li>
                          </ul>
                        </div>
                       <!-- current-org -->
                        <input type="text" data-document_id="" name="current_org" class="sessionUser_Id" data-get_value="currentOrgId">
                </form>
                </div>

 
	<style>
		.data-unique-success{
		border-color: green!important;
		}
		.data-unique-error{
		border-color: red!important;
		}
		.selectable--list {
		    margin:3px;
		}
	</style>
  
  
<!-- Javascript -->
	<script type="text/javascript">
	function generateUUID() {
    var d = new Date().getTime();
    var d2 = (performance && performance.now && (performance.now()*1000)) || 0;//Time in microseconds since page-load or 0 if unsupported
    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
        var r = Math.random() * 16;
        if(d > 0){
            var r = (d + r)%16 | 0;
            d = Math.floor(d/16);
        } else {
            var r = (d2 + r)%16 | 0;
            d2 = Math.floor(d2/16);
        }
        return (c=='x' ? r : (r&0x7|0x8)).toString(16);
    });
    return uuid;
};

function setValue(id,value){
	var node = document.getElementById(id)
	node.value = value;
	var event = new Event('input');
	node.dispatchEvent(event);
}
/*
$('.btnstep4').on('click',function(){

	setValue('apiKey',generateUUID())
	setValue('securityKey',generateUUID())
})
*/
document.getElementById('apiKey').value = generateUUID();
document.getElementById('securityKey').value = generateUUID();

</script>

  <script>
    localStorage.removeItem('organization_id');
    localStorage.removeItem('apiKey');
    localStorage.removeItem('securityKey');
  </script>
  
  <script>
    var config = {
      apiKey: 'c2b08663-06e3-440c-ef6f-13978b42883a',
      securityKey: 'f26baf68-e3a9-45fc-effe-502e47116265',
      organization_Id: '5de0387b12e200ea63204d6c'
    }
  </script>
  
  <!--CoCreateJS-->
  <!--<script src="https://cdn.cocreate.app/CoCreate.min.js"></script>-->
  <script src="https://server.cocreate.app/js/socket.io.js"></script>
  <script src="https://server.cocreate.app/js/CoCreate.js"></script>
  <script src="https://server.cocreate.app/js/CoCreate-templating.js"></script>
  <script src="https://server.cocreate.app/js/CoCreate-users.js"></script>
  <script src="https://server.cocreate.app/js/CoCreate-sort.js"></script>
  <script src="https://server.cocreate.app/js/CoCreate-clone.js"></script>
  <script src="https://server.cocreate.app/js/CoCreate-conditional-logic.js"></script>
  <script src="https://server.cocreate.app/js/CoCreate-select.js"></script>

  <script src="https://server.cocreate.app/js/CoCreate-industry.js"></script>


  <script>
    
    var getCurrentOrgForDashboardLink = false;
  
    let dashboardLink = document.querySelector(".dashboardLink");
    
    dashboardLink.addEventListener('click', function(e) {
      e.preventDefault();
      
      let userId = localStorage.getItem('userId');
      
      getCurrentOrg(userId);
      
      var timer = setInterval(function() {
        if (getOrg) {
          if (getCurrentOrgForDashboardLink) {
            let href = dashboardLink.getAttribute('href');
            
            document.location.href = href;
            
            clearInterval(timer);
          }
        }
      }, 100)
    })
    
    socket.on('usersCurrentOrg', function(data) {
      console.log(data);
      
      getCurrentOrgForDashboardLink = true;
      
      localStorage.setItem('apiKey', data['apiKey']);
      localStorage.setItem('securityKey', data['securityKey']);
      localStorage.setItem('organization_id', data['current_org']);
      
      localStorage.setItem('adminUI_id', data['adminUI_id']);
      localStorage.setItem('builderUI_id', data['builderUI_id']);
      
    })
  </script>

</body>

</html>