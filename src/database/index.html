<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Database | CoCreate</title>
        <link
            rel="icon"
            type="image/png"
            sizes="32x32"
            href="assets/favicon.ico" />
        <link
            rel="stylesheet"
            type="text/css"
            href="https://cdn.cocreate.app/latest/CoCreate.min.css" />
        <link
            rel="stylesheet"
            href="../index.css"
            array="files"
            object="637bc8fe91249e639db315d9"
            key="src"
            type="text/css" />
        <link rel="manifest" href="/manifest.webmanifest" />
    </head>

    <style type="text/css">
        .cocreate-search .floating-label_field {
            margin-top: 0px;
        }
        .active [actions] {
            display: block;
        }
    </style>

    <body>
        <!-- Navbar -->
        <nav
            class="nav display:flex align-items:center background:whitesmoke position:sticky"
            content_id="content"
            scroll="sticky-nav, hide-nav"
            scroll-up="5"
            scroll-down="5">
            <!-- Menu Icon Animations -->
            <a class="menu_icon--Vdots" toggle="active" toggle-sidenav="menuL">
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
            </a>

            <!-- Horizontal Scroll Nav/Tabs -->
            <ul
                class="display:inline-flex direction:rtl overflow:auto font-size:20px align-items:center list-style-type:none width:100% height:50px">
                <!-- Modal Controls -->
                <li class="margin-right:15px">
                    <a actions="closeModal"
                        ><i
                            class="display:flex height:18px fill:#505050"
                            src="/assets/svg/times.svg"></i
                    ></a>
                </li>
                <li class="margin-right:15px">
                    <a actions="minMaxModal">
                        <i
                            toggle="/assets/svg/window-restore.svg, /assets/svg/window-maximize.svg"
                            toggle-attribute="src"
                            class="display:flex height:18px fill:#505050"
                            src="/assets/svg/window-maximize.svg"></i>
                    </a>
                </li>
                <li class="margin-right:15px">
                    <a actions="parkModal"
                        ><i
                            class="display:flex height:18px fill:#505050"
                            src="/assets/svg/window-minimize.svg"></i
                    ></a>
                </li>

                <!-- fullscreen toogle and icon transform-->
                <li class="margin-right:15px">
                    <a fullscreen>
                        <i
                            class="display:flex height:18px fill:#505050"
                            src="/assets/svg/expand.svg"></i>
                        <i
                            class="display:flex height:18px fill:#505050"
                            src="/assets/svg/compress.svg"></i>
                    </a>
                </li>

                <!-- Render Module Form -->
                <li class="margin-right:15px">
                    <a
                        actions="pass, openModal"
                        modal-src="./modules/form.html"
                        modal-width="320px">
                        <i
                            class="display:flex height:18px fill:#505050"
                            src="/assets/svg/cog.svg"></i>
                        <div
                            pass_id="module-form"
                            pass-array="modules"
                            pass-object=""
                            pass_to="form-fields"></div>
                        <div
                            pass_id="module_id"
                            pass-filter-value=""
                            pass_to="module_id"></div>
                    </a>
                </li>

                <!-- Render Code Editor -->
                <li class="margin-right:15px">
                    <a
                        actions="pass, openModal"
                        modal-src="./code-editor/index.html">
                        <i
                            class="display:flex height:18px fill:#505050"
                            src="/assets/svg/code.svg"></i>
                        <div
                            pass_id="render"
                            pass-array=""
                            pass-object=""
                            pass-key=""
                            pass_to="code-editor"></div>
                    </a>
                </li>

                <!-- Render Builder -->
                <li class="margin-right:15px">
                    <a
                        actions="pass, openModal"
                        modal-src="./builder/index.html">
                        <i
                            class="display:flex height:18px fill:#505050"
                            src="/assets/svg/palette.svg"></i>
                        <div
                            pass_id="render"
                            pass-array=""
                            pass-object=""
                            pass-key=""
                            pass_to="builder"></div>
                    </a>
                </li>

                <!-- Datatable Controls -->
                <li class="margin-right:15px">
                    <a
                        actions="delete"
                        array=""
                        pass_id="array-view"
                        filter-selector="#array-view"
                        ><i
                            class="height:18px fill:#505050"
                            src="/assets/svg/trash-alt.svg"></i
                    ></a>
                </li>
                <li class="margin-right:15px">
                    <a toggle="hidden" toogle-selector="#column-visibility"
                        ><i
                            class="height:18px fill:#505050"
                            src="/assets/svg/eye.svg"></i
                    ></a>
                </li>
                <li class="margin-right:15px">
                    <a
                        actions="export"
                        export-type="csv"
                        filter-selector="#array-view"
                        pass_id="array-view"
                        ><i
                            class="height:18px fill:#505050"
                            src="/assets/svg/file-csv.svg"></i
                    ></a>
                </li>
                <li class="margin-right:15px">
                    <a
                        actions="export"
                        filter-selector="#array-view"
                        pass_id="array-view"
                        ><i
                            class="height:18px fill:#505050"
                            src="/assets/svg/file-download.svg"></i
                    ></a>
                </li>
                <li class="margin-right:15px">
                    <a actions="import" array="" pass_id="array-view"
                        ><i
                            class="height:18px fill:#505050"
                            src="/assets/svg/file-upload.svg"></i
                    ></a>
                </li>
                <li class="margin-right:15px">
                    <a actions="copy" copy-selector="tbody"
                        ><i
                            class="height:18px fill:#505050"
                            src="/assets/svg/copy.svg"></i
                    ></a>
                </li>
                <li class="margin-right:15px">
                    <a
                        actions="print"
                        print-selector="[template_id='#array-view']"
                        ><i
                            class="height:18px fill:#505050"
                            src="/assets/svg/print.svg"></i
                    ></a>
                </li>
            </ul>
        </nav>

        <!-- Modal Viewport  -->
        <div
            class="position:fixed margin-top:50px"
            content_id="content"
            id="modal-viewport"></div>

        <!-- Main container  -->
        <main class="height:100vh padding:10px" content_id="content">
            <table class="width:100% border-collapse:collapse">
                <tr class="border-bottom:1px_solid_darkgray">
                    <td
                        class="position:sticky top:0 background:white padding:15px z-index:7">
                        <floating-label>
                            <input
                                type="text"
                                class="floating-label"
                                filter-selector="#array-view"
                                filter-search
                                placeholder="Search" />
                        </floating-label>
                    </td>
                </tr>
                <tbody
                    id="array-view"
                    render-selector="[template='array-view']"
                    array=""
                    filter-limit="5"
                    pass-overwrite
                    pass_id="array-view">
                    <tr
                        template
                        class="background:whitesmoke:hover border-bottom:1px_solid_darkgray"
                        object="{{object._id}}"
                        toggle="selected"
                        hover="visibility:visible!important"
                        hover-selector=".tools{{object._id}}">
                        <td
                            class="padding:5px min-width:300px align-items:center">
                            <div
                                class="display:flex justify-content:flex-end transition:0.3s padding-left:10px">
                                <div
                                    class="visibility:hidden tools{{object._id}}">
                                    <a
                                        class="float:right margin-right:15px"
                                        actions="deleteObject"
                                        array="{{object.array}}"
                                        object=""
                                        ><i
                                            class="height:18px fill:#505050"
                                            src="/assets/svg/trash.svg"></i
                                    ></a>
                                </div>
                            </div>
                            <div
                                class="template display:flex"
                                render="object"
                                render-as="one"
                                render-exclude="db, database, array"
                                hover="visibility:visible!important"
                                hover-selector=".tools{{object._id}}{{one.key}}">
                                <span
                                    class="visibility:hidden tools{{object._id}}{{one.key}}">
                                    <form
                                        realtime="false"
                                        class="margin-top:10px">
                                        <input
                                            type="hidden"
                                            array="{{object.array}}"
                                            object="{{object._id}}"
                                            key="{{one.key}}.untitled"
                                            value="untitiled" />
                                        <a actions="save, reset"
                                            ><i
                                                class="height:16px fill:#505050"
                                                src="/assets/svg/plus.svg"></i
                                        ></a>
                                    </form>
                                    <form
                                        realtime="false"
                                        class="margin-top:10px">
                                        <a
                                            actions="deleteName"
                                            array="{{object.array}}"
                                            object="{{object._id}}"
                                            deletekey="{{one.key}}"
                                            ><i
                                                class="height:18px fill:#505050"
                                                src="/assets/svg/trash.svg"></i
                                        ></a>
                                    </form>
                                </span>
                                <span class="padding:10px"
                                    ><span
                                        array="{{object.array}}"
                                        object="{{object._id}}"
                                        updatekey="{{one.key}}"
                                        contenteditable
                                        >{{one.key}}</span
                                    >:
                                </span>
                                <div
                                    class="{{one.type}} width:100%"
                                    parentkey="{{one.key}}"
                                    parenttype="{{one.type}}"></div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <div
                filter-selector="#array-view"
                filter-on="scroll"
                class="opacity:0 height:30px"></div>

            <button
                class="position:absolute bottom:15px right:15px line-height:50px width:50px background:dodgerblue color:#fff font-size:1.5rem grow-hover border-radius:50% border-width:0 box-shadow:0px_2px_10px_0px_rgba(0,_0,_0,_0.4)">
                <form array="" object="" pass_id="array-view">
                    <input
                        type="hidden"
                        object=""
                        key="name"
                        value="untitled"
                        pass_id="module_id" />
                    <a actions="save, reset"
                        ><i
                            class="height:16px fill:#505050"
                            src="/assets/svg/plus.svg"></i
                    ></a>
                </form>
            </button>

            <template
                hidden
                observe-selector=".string"
                observe-attribute="value">
                <floating-label render>
                    <textarea
                        rows="1"
                        array="{{object.array}}"
                        object="{{object._id}}"
                        key="$parents"
                        class="floating-label"></textarea>
                </floating-label>
            </template>

            <template
                hidden
                observe-selector=".object, .array"
                observe-attribute="value">
                <div
                    render="object.$parents"
                    render-exclude="db, database, array"
                    render-as="$auto"
                    class="template margin-top:20px">
                    <div
                        class="display:flex padding-top:10px"
                        id="testtemplate2"
                        hover="visibility:visible!important"
                        hover-selector="[tools='$parents{{$auto.key}}']">
                        <span
                            class="visibility:hidden tools$parents{{$auto.key}}"
                            tools="$parents{{$auto.key}}">
                            <form realtime="false" class="margin-top:10px">
                                <input
                                    type="hidden"
                                    array="{{object.array}}"
                                    object="{{object._id}}"
                                    key="$parents.untitled"
                                    value="untitiled" />
                                <a actions="save, reset"
                                    ><i
                                        class="height:16px fill:#505050"
                                        src="/assets/svg/plus.svg"></i
                                ></a>
                            </form>
                            <form realtime="false" class="margin-top:10px">
                                <a
                                    actions="deleteName"
                                    array="{{object.array}}"
                                    object="{{object._id}}"
                                    deletekey="$parents.{{$auto.key}}"
                                    ><i
                                        class="height:18px fill:#505050"
                                        src="/assets/svg/trash.svg"></i
                                ></a>
                            </form>
                        </span>
                        <span class="padding:10px"
                            ><span
                                array="{{object.array}}"
                                object="{{object._id}}"
                                value-prefix="$parents."
                                updatekey="$parents.{{$auto.key}}"
                                contenteditable
                                >{{$auto.key}}</span
                            >:
                        </span>
                        <div
                            class="{{$auto.type}}"
                            parentkey="{{$auto.key}}"
                            parenttype="{{$auto.type}}"></div>
                    </div>
                </div>
            </template>
        </main>

        <!-- SideNav  -->
        <sidenav
            id="menuL"
            class="position:absolute top:0px left:0px overflow:hidden background:whitesmoke height:100vh width:275px width:0px@xs"
            resizable
            resize-selector="[content_id='content']"
            resize-property="margin-left"
            resize-value="width">
            <!-- Search -->
            <form class="padding:5px">
                <floating-label>
                    <input
                        type="text"
                        class="floating-label"
                        key="array"
                        filter-key="name"
                        filter-selector="#arrays" />
                </floating-label>
                <span
                    class="passValueBtn position:relative bottom:29px right:11px float:right font-size:18px">
                    <a actions="createCollection, reset">
                        <i
                            class="height:16px fill:#505050"
                            src="/assets/svg/plus.svg"></i>
                    </a>
                </span>
            </form>

            <div class="padding-right:5px padding-bottom:5px">
                <!-- Fetch and Render-->
                <ul
                    class="overflow:auto display:flex flex-direction:column width:100% height:calc(100vh_-_90px) bottom:10px margin-right:5px">
                    <div
                        id="arrays"
                        array
                        filter-sort-key="name"
                        filter-sort-direction="asc"
                        render-selector="[template='arrays']"
                        filter>
                        <!-- Template -->
                        <li
                            template
                            class="line-height:40px height:40px overflow:hidden white-space:nowrap background:dodgerblue:hover"
                            hover="active">
                            <a
                                actions="pass"
                                pass-array="{{array.name}}"
                                pass_to="array-view"
                                class="display:inline-block padding-left:15px">
                                <span>{{array.name}}</span>
                            </a>
                            <div
                                class="float:right width:50px text-align:center">
                                <a
                                    actions="deleteCollection"
                                    array="{{array.name}}"
                                    class="display:none">
                                    <i
                                        class="height:18px fill:#505050"
                                        src="/assets/svg/trash.svg"></i>
                                </a>
                            </div>
                        </li>
                    </div>
                </ul>
            </div>
            <div resize="right"></div>
        </sidenav>

        <div class="position:fixed!important bottom:15px right:15px">
            <div
                template
                class="card position:fixed!important bottom:15px right:15px padding:10px {{status}}">
                <span class="{{type}}">{{message}}</span
                ><a actions="remove" remove-closest="[templateid]"> X</a>
            </div>
        </div>

        <script src="../../../CoCreateJS/dist/CoCreate.js"></script>
    </body>
</html>
