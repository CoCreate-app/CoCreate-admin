<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="https://cdn.cocreate.app/favicon.ico" type="image/ico" sizes="32x32">
        <title>Organiztion Creator | CoCreate</title>
        <link rel="stylesheet" href="./index.css" collection="files" document_id="60972231624235187e4d6979" name="src" type="text/css" save="true" parse="true"/>
    </head>

    <style>
        .speech-bubble:after {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            width: 0;
            height: 0;
            border: 23px solid transparent;
            border-bottom-color: #ffffff;
            border-top: 0;
            margin-left: -23px;
            margin-top: -23px;
        }
    </style>

    <body style='background-image: url("https://cdn.cocreate.app/background.png");'>
        <a href="index.html" target="" class="sessionTrue" hidden></a>

        <a href="../../admin/" title="" class="position:relative z-index:1 float:right margin:15px color:white dashboardLink">Dashboard</a>

        <div class="main-container justify-content:center align-items:center overflow:auto display:flex flex-wrap:wrap position:absolute width:100% height:100%">
            <div class="display:flex flex-wrap:wrap align-items:flex-end justify-content:center align-items:center">
                <div class="flex-grow:1 height:fit-content width:55% min-width:300px max-width:600px margin:10px">
                    <img src="https://cdn.cocreate.app/Preloader_2.gif" class="display:block margin:auto-lr margin:20px_0px">

                    <hgroup class="speech-bubble position:relative background:white border-radius:4px padding:15px">
                        <div class="color:blue font-size:24px">
                            <p id="ava1">
                                Hey, <span document_id="" name="name" class="sessionUser_Id" collection="users">First Name</span>! Enter your new organization's name. Don't worry if you are not sure, you can allways update it later.
                            </p>
                            <p id="ava2" hidden>
                                Great, <span document_id="" name="name" class="sessionUser_Id" collection="users">First Name</span>! Letâ€™s choose an industry so I can begin to understand what we will be doing.
                            </p>
                            <p id="ava3" hidden>
                                I could do special animations to impress you. But instead I will build your organization instantly and impress you with my speed!
                            </p>
                        </div>
                    </hgroup>
                </div>

                <div class="flex-grow:1 height:fit-content width:35% min-width:300px max-width:400px margin:10px">
                    <form realtime="false">

                        <div id="step1">
                            <div class="overflow:hidden padding:0px_25px background:white">
                                <div class="float:left width:75% padding-top:25px">
                                    <h3>Step 1 / 3</h3>
                                </div>
                                <div class="float:right width:25% padding-top:5px font-size:70px line-height:100px text-align:right color:very-light-gray">
                                    <i class="fas fa-store"></i>
                                </div>
                            </div>
                            <div class="padding:25px background:gainsboro text-align:left">
                                <input type="text" id="org-name" collection="organizations" document_id="" name="name" placeholder="Organization Name" class="floating-label">

                                <button type="button" class="outline" show='#step2,#ava2' hide='#step1,#ava1'>Next</button>
                            </div>
                        </div>

                        <div id="step2" hidden>
                            <div class="overflow:hidden padding:0px_25px background:white">
                                <div class="float:left width:75% padding-top:25px">
                                    <h3>Step 2 / 3</h3>
                                </div>
                                <div class="float:right width:25% padding-top:5px font-size:70px line-height:100px text-align:right color:very-light-gray">
                                    <i class="fas fa-industry"></i>
                                </div>
                            </div>
                            <div class="padding:25px background:gainsboro text-align:left">

                                <!-- Industry select -->
                                <cocreate-select sortable class="floating-label" collection="organizations" document_id="" name="industry" placeholder="Industry">
                                    <input placeholder="Search" template_id="template1">
                                    <ul fetch-collection="industries" template_id="template1" pass_to="me1234" class="template-wrapper options overflow:auto">
                                        <li class="template option" pass_id="me1234">
                                            <h5 collection="industries" document_id="" name="industry_name" pass_id="me1234">industry name</h5>
                                        </li>
                                    </ul>
                                </cocreate-select>

                                <button type="button" class="outline white-blue" show='#step1,#ava1' hide='#step2,#ava2'>Previous</button>
                                <button type="button" class="outline" show='#step3,#ava3' hide='#step2,#ava2'>Next</button>
                            </div>
                        </div>

                        <div id="step3" hidden>
                            <div class="overflow:hidden padding:0px_25px background:white">
                                <div class="float:left width:75% padding-top:25px">
                                    <h3>Step 3 / 3</h3>
                                </div>
                                <div class="float:right width:25% padding-top:5px font-size:70px line-height:100px text-align:right color:very-light-gray">
                                    <i class="fa fa-key"></i>
                                </div>
                            </div>
                            <div class="padding:25px background:gainsboro text-align:left">

                                <!-- API key  -->
                                <input type="hidden" id="apiKey" collection="organizations" document_id="" name="apiKey" placeholder="API Key" uuid="32" readonly>

                                <!-- Security key  -->
                                <input type="hidden" id="securityKey" collection="organizations" document_id="" name="securityKey" placeholder="security Key" uuid="32" readonly>

                                <button type="button" class="outline white-blue" show='#step2,#ava2' hide='#step3,#ava3'>Previous</button>
                                <button type="button" class="outline red-white registerBtn industryBtn"><a href="index.html">Launch</a></button>

                            </div>
                        </div>
                    </form>

                </div>

            </div>
        </div>

        <!--CoCreateJS-->
        <script src="../apikey.js"></script>
        <script src="https://cdn.cocreate.app/1.26.0/CoCreate.min.js"></script>

        <script>
            localStorage.removeItem('organization_id');
            localStorage.removeItem('apiKey');
            localStorage.removeItem('securityKey');
        </script>

        <script>
            var getCurrentOrgForDashboardLink = false;

            let dashboardLink = document.querySelector(".dashboardLink");

            dashboardLink.addEventListener('click', function(e) {
                e.preventDefault();

                let userId = localStorage.getItem('userId');

                getCurrentOrg(userId);

                var timer = setInterval(function() {
                    if (getOrg) {
                        if (getCurrentOrgForDashboardLink) {
                            let href = dashboardLink.getAttribute('href');

                            document.location.href = href;

                            clearInterval(timer);
                        }
                    }
                }, 100)
            })

            // socket.on('userCurrentOrg', function(data) {
            //     console.log(data);

                getCurrentOrgForDashboardLink = true;

                localStorage.setItem('apiKey', data['apiKey']);
                localStorage.setItem('securityKey', data['securityKey']);
                localStorage.setItem('organization_id', data['current_org']);

                localStorage.setItem('admin_id', data['admin_id']);
                localStorage.setItem('builderUI_id', data['builderUI_id']);

            })
        </script>

    </body>

</html>
